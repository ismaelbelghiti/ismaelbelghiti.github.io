(this.webpackJsonpsweetreact=this.webpackJsonpsweetreact||[]).push([[0],{350:function(e,t,n){e.exports=n(581)},547:function(e,t,n){},548:function(e,t,n){},555:function(e,t){},556:function(e,t){},564:function(e,t){},581:function(e,t,n){"use strict";n.r(t);n(351),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(378),n(379),n(177),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(405),n(406),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(443),n(444),n(445),n(446),n(453),n(454),n(455),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(284),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(287),n(477),n(478),n(479),n(480),n(481),n(482),n(484),n(486),n(487),n(488),n(489),n(490),n(491),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(533),n(534),n(535),n(536),n(538),n(298);var i=n(8),a=n.n(i),o=n(120),r=n.n(o),c=n(167),l=n(602),s=n(302),u=n(303),d=n(599),f=n(139),h=n.n(f);n(543),n(544),c.a.use(d.a).use(s.a).use(u.a).init({fallbackLng:"en",ns:["translations"],defaultNS:"translations",load:"unspecific",debug:!1,saveMissing:!0,interpolation:{escapeValue:!1,formatSeparator:",",format:function(e,t){return e instanceof Date?"relative"===t?h()(e).fromNow():h()(e).format(t):e.toString()}},returnObjects:!0,react:{useSuspense:!0,defaultTransParent:"span"}}),c.a.on("languageChanged",(function(e){h.a.locale(e)})),c.a.on("missingKey",(function(e,t,n){var i=new Error("Missing translation key in ".concat(e,": ").concat(n));l.a(i)}));c.a,n(299),n(545),n(546),n(547),n(548),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var b=n(6),y=n(15),g=n(47),m=n(46),x=n(244),p=n(55),v=n(334),w=n(41),k=n.n(w),E=n(163),O=n.n(E),j=function(){var e=Object(i.useRef)(null),t=Object(i.useRef)(null);return a.a.createElement("div",null,a.a.createElement(O.a,{ref:e,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:720,height:500}}),a.a.createElement("canvas",{ref:t,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:720,height:500}}))},M=n(73),S=n(34),N=n(9),R=n.n(N),C=n(12),z=n(7),A=n(210),T=n(601),P=n(246),D=(n(0),n(580),{xMinRatio:.4,xMaxRatio:.6,yMinRatio:.4,yMaxRatio:.6}),W=.01,B=.01,F=.01,I=.01,L=!0,V=1,X=1,q=0,J=function(e){var t=e.x1,n=e.y1,i=e.x2-t,a=e.y2-n,o=e.x3-t,r=e.y3-n;return Math.abs(i*r-a*o)},H=function(e){var t=e.x1,n=e.y1,i=e.x2-t,a=e.y2-n;return Math.sqrt(i*i+a*a)},K=function(){var e=Object(i.useState)("medium"),t=Object(z.a)(e,2),n=t[0],o=t[1],r=Object(i.useState)(!1),c=Object(z.a)(r,2),l=c[0],s=c[1],u=Object(i.useState)(!1),d=Object(z.a)(u,2),f=(d[0],d[1]),h=Object(i.useState)(!1),b=Object(z.a)(h,2),y=b[0],g=b[1],m=Object(i.useState)(!0),x=Object(z.a)(m,2),p=(x[0],x[1]),v=Object(i.useState)(0),w=Object(z.a)(v,2),k=w[0],E=w[1],j=Object(i.useState)(0),N=Object(z.a)(j,2),K=N[0],$=N[1],_=Object(i.useState)(null),G=Object(z.a)(_,2),Q=G[0],U=G[1],Y=Object(i.useState)(1),Z=Object(z.a)(Y,2),ee=(Z[0],Z[1]),te=Object(i.useState)(1),ne=Object(z.a)(te,2),ie=(ne[0],ne[1]),ae=Object(i.useState)(1),oe=Object(z.a)(ae,2),re=(oe[0],oe[1]),ce=Object(i.useRef)(null),le=Object(i.useRef)(null),se=null,ue=function(){var e=Object(C.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.b(P.a.MediaPipeFaceMesh,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh"});case 2:se=e.sent,f(!0),setInterval((function(){return be(se)}),200);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){ue()}),[]);Object(i.useEffect)((function(){!function e(){var t=350+600*W,n=50+400*B,i=Math.abs(W-F)<=.03&&Math.abs(B-I)<=.03;i!==L&&p(i),L=i;var a=document.elementFromPoint(t,n),o=L&&X>=1.1*V;o&&(g(!0),setTimeout((function(){g(!1)}),300)),o,((null===a||void 0===a?void 0:a.id)||"").indexOf("target-button")>=0&&L&&X>=1.1*V&&a.click(),((null===a||void 0===a?void 0:a.id)||"").indexOf("target")>=0&&L&&X>=1.1*V&&a.click(),setTimeout(e,50)}()}),[]);var de=function(e){var t=e.ctx,n=e.x,i=e.y,a=e.color,o=e.radius;t.beginPath(),t.arc(n,i,o,0,3*Math.PI),t.fillStyle=a,t.fill()},fe=function(e,t,n){if(!A.a.isEmpty(t)){var i,a=0,o=0,r=Object(S.a)(t||[]);try{for(r.s();!(i=r.n()).done;){var c=i.value,l=c.x,s=c.y;a+=l,o+=s}}catch(f){r.e(f)}finally{r.f()}var u=Math.floor(a/t.length),d=Math.floor(o/t.length);de({ctx:e,x:u,y:d,color:n,radius:2})}},he=function(e,t){if(null===t||void 0===t?void 0:t[0]){var n,i=t[0],a=(i.box,i.keypoints),o={},r=0,c=Object(S.a)(a||[]);try{for(c.s();!(n=c.n()).done;){var l=n.value;l.name&&(o[l.name]||(o[l.name]=[]),o[l.name].push(Object(M.a)(Object(M.a)({},l),{},{index:r}))),r++}}catch(Y){c.e(Y)}finally{c.f()}fe(e,o.leftEye,"aqua"),fe(e,o.rightEye,"red"),fe(e,o.lips,"yellow"),fe(e,o.rightEyebrow,"brown"),fe(e,o.leftEyebrow,"purple");!function(e,t,n){var i,a=new Path2D,o=!0,r=Object(S.a)(t||[]);try{for(r.s();!(i=r.n()).done;){var c=i.value,l=c.x,s=c.y;c.name;o?a.moveTo(l,s):a.lineTo(l,s),o=!1}}catch(Y){r.e(Y)}finally{r.f()}a.closePath(),e.strokeStyle=n,e.lineWidth=3,e.stroke(a)}(e,A.a.map([132,58,172,136,150,149,176,148,152,377,400,378,379,365,397,288,361,323,454,356,389,251,284,332,297,338,10,109,67,103,54,21,93,162,234,127],(function(e){return a[e]})),"lightgrey");var s=function(e){var t=e.keypoints;if(A.a.isEmpty(t))return{x:0,y:0};var n,i=0,a=0,o=Object(S.a)(t||[]);try{for(o.s();!(n=o.n()).done;){var r=n.value,c=r.x,l=r.y;i+=c,a+=l}}catch(Y){o.e(Y)}finally{o.f()}return{x:Math.floor(i/t.length),y:Math.floor(a/t.length)}},u=s({keypoints:o.leftEyebrow}),d=u.x,f=u.y,h=s({keypoints:o.rightEyebrow}),b=h.x,y=h.y,g=s({keypoints:o.leftEye}),m=g.x,x=g.y,p=s({keypoints:o.rightEye}),v=p.x,w=p.y,k=s({keypoints:o.lips}),O=k.x,j=k.y,N=Math.floor((m+v)/2),R=Math.floor((x+w)/2),C=Math.floor((d+b)/2),z=Math.floor((f+y)/2),T=Math.floor((2*N+O)/3),P=Math.floor((2*R+j)/3),L=a[10].x,q=a[10].y,K=H({x1:C,y1:z,x2:N,y2:R})/Math.max(.001,H({x1:N,y1:R,x2:O,y2:j}))/Math.max(.001,H({x1:N,y1:R,x2:L,y2:q})/Math.max(.001,H({x1:N,y1:R,x2:O,y2:j})));re(K),X=K,setTimeout((function(){V=K}),500),de({ctx:e,x:N,y:R,color:"red",radius:2}),de({ctx:e,x:T,y:P,color:"green",radius:4}),de({ctx:e,x:L,y:q,color:"white",radius:6});var _=(D.xMaxRatio-D.xMinRatio)*le.current.width,G=(D.yMaxRatio-D.yMinRatio)*le.current.height,Q=1-(T-(1-D.xMaxRatio)*le.current.width)/_,U=(P-D.yMinRatio*le.current.height)/G;E(Q),$(U),W=Q,setTimeout((function(){F=Q}),500),B=U,setTimeout((function(){I=U}),500),ee(J({x1:m,y1:x,x2:d,y2:f,x3:b,y3:y})+J({x1:m,y1:x,x2:b,y2:y,x3:v,y3:w})),ie(J({x1:m,y1:x,x2:v,y2:w,x3:O,y3:j})),function(e){var t=(1-D.xMaxRatio)*le.current.width,n=(1-D.xMinRatio)*le.current.width,i=D.yMinRatio*le.current.height,a=D.yMaxRatio*le.current.height,o=new Path2D;o.moveTo(t,i),o.lineTo(t,a),o.lineTo(n,a),o.lineTo(n,i),o.closePath(),e.strokeStyle="grey",e.lineWidth=2,e.stroke(o)}(e)}},be=function(){var e=Object(C.a)(R.a.mark((function e(t){var n,i,a,o,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof ce.current||null===ce.current||4!==ce.current.video.readyState){e.next=15;break}return n=ce.current.video,i=ce.current.video.videoWidth,a=ce.current.video.videoHeight,ce.current.video.width=i,ce.current.video.height=a,le.current.width=i,le.current.height=a,e.next=10,t.estimateFaces(n);case 10:o=e.sent,(r=le.current.getContext("2d")).translate(i,0),r.scale(-1,1),he(r,o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=600/(D.xMaxRatio-D.xMinRatio),ge=400/(D.yMaxRatio-D.yMinRatio);return a.a.createElement("div",{id:"my-container",style:{opacity:.6}},a.a.createElement("div",{style:{position:"absolute",left:25,top:230,zindex:8,width:300,height:500}},a.a.createElement(T.a,{id:"target-button",size:"large",onClick:function(){var e=Date.now();e-q>=1e3&&(q=e,console.log("XXX",e),s(!l))}},l?"Fond gris":"Incruster"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(T.a,{id:"target-button-acc1",size:"large",color:"high"===n?"teal":"grey",onClick:function(){o("high"),D={xMinRatio:.45,xMaxRatio:.55,yMinRatio:.45,yMaxRatio:.55}}},"Tr\xe8s sensible"),a.a.createElement("br",null),a.a.createElement(T.a,{id:"target-button-acc2",size:"large",color:"medium"===n?"teal":"grey",onClick:function(){o("medium"),D={xMinRatio:.4,xMaxRatio:.6,yMinRatio:.4,yMaxRatio:.6}}},"Sensible"),a.a.createElement("br",null),a.a.createElement(T.a,{id:"target-button-acc3",size:"large",color:"low"===n?"teal":"grey",onClick:function(){o("low"),D={xMinRatio:.3,xMaxRatio:.7,yMinRatio:.3,yMaxRatio:.7}}},"Peu sensible")),a.a.createElement("div",{id:"fake-screen",className:"fake-screen",style:{position:"absolute",left:350,top:50,textAlign:"center",zindex:8,width:600,height:400,background:"whitesmoke"}},a.a.createElement("div",{id:"inner-fake-screen",className:"fake-screen",style:{position:"absolute",left:0,top:0,textAlign:"center",zindex:8,width:600,height:400,background:"whitesmoke",overflow:"hidden"}},a.a.createElement(O.a,{id:"my-inner-webcam",ref:ce,mirrored:!0,style:{opacity:l?1:0,position:"relative",overflow:"hidden",left:-D.xMinRatio*ye,top:-D.yMinRatio*ge,textAlign:"center",zindex:9,width:ye,height:ge}})),a.a.createElement("div",{id:"target-yellow",className:"target-yellow",style:Object(M.a)({position:"absolute",left:130,top:30,textAlign:"center",zindex:10,width:35,height:35,background:"yellow"},"yellow"===Q&&{border:"3px solid black"}),onClick:function(){U("yellow")}}),a.a.createElement("div",{id:"target-purple",className:"target-purple",style:Object(M.a)({position:"absolute",left:380,top:30,textAlign:"center",zindex:8,width:35,height:35,background:"purple"},"purple"===Q&&{border:"4px solid black"}),onClick:function(){U("purple")}}),a.a.createElement("div",{id:"target-orange",className:"target-orange",style:Object(M.a)({position:"absolute",left:280,top:250,textAlign:"center",zindex:8,width:35,height:35,background:"orange"},"orange"===Q&&{border:"4px solid black"}),onClick:function(){U("orange")}}),a.a.createElement("div",{id:"target-brown",className:"target-brown",style:Object(M.a)({position:"absolute",left:70,top:150,textAlign:"center",zindex:8,width:35,height:35,background:"brown"},"brown"===Q&&{border:"4px solid black"}),onClick:function(){U("brown")}}),a.a.createElement("div",{id:"target-grey",className:"target-grey",style:Object(M.a)({position:"absolute",left:250,top:160,textAlign:"center",zindex:8,width:35,height:35,background:"grey"},"grey"===Q&&{border:"4px solid black"}),onClick:function(){U("grey")}}),a.a.createElement("div",{id:"target-blue",className:"target-blue",style:Object(M.a)({position:"absolute",left:80,top:230,textAlign:"center",zindex:8,width:35,height:35,background:"blue"},"blue"===Q&&{border:"4px solid black"}),onClick:function(){U("blue")}}),a.a.createElement("div",{id:"target-pink",className:"target-pink",style:Object(M.a)({position:"absolute",left:420,top:330,textAlign:"center",zindex:8,width:35,height:35,background:"pink"},"pink"===Q&&{border:"4px solid black"}),onClick:function(){U("pink")}}),a.a.createElement("div",{id:"target-teal",className:"target-teal",style:Object(M.a)({position:"absolute",left:520,top:210,textAlign:"center",zindex:8,width:35,height:35,background:"teal"},"teal"===Q&&{border:"4px solid black"}),onClick:function(){U("teal")}}),a.a.createElement("div",{id:"target-lime",className:"target-lime",style:Object(M.a)({position:"absolute",left:110,top:310,textAlign:"center",zindex:8,width:35,height:35,background:"lime"},"lime"===Q&&{border:"4px solid black"}),onClick:function(){U("lime")}}),a.a.createElement("div",{id:"my-cross-top",style:{position:"absolute",left:600*k+3,top:400*K-20,textAlign:"center",zindex:8,width:4,height:20,background:y?"red":"cyan"}}),a.a.createElement("div",{id:"my-cross-bottom",style:{position:"absolute",left:600*k+3,top:400*K+10,textAlign:"center",zindex:8,width:4,height:20,background:y?"red":"cyan"}}),a.a.createElement("div",{id:"my-cross-left",style:{position:"absolute",left:600*k-20,top:400*K+3,textAlign:"center",zindex:8,width:20,height:4,background:y?"red":"cyan"}}),a.a.createElement("div",{id:"my-cross-right",style:{position:"absolute",left:600*k+10,top:400*K+3,textAlign:"center",zindex:8,width:20,height:4,background:y?"red":"cyan"}})),a.a.createElement(O.a,{id:"my-webcam",ref:ce,mirrored:!0,style:{position:"absolute",left:0,right:0,textAlign:"center",zindex:9,width:288,height:200}}),a.a.createElement("canvas",{id:"my-canvas",ref:le,style:{position:"absolute",left:0,right:0,textAlign:"center",zindex:9,width:288,height:200}}))},$=n(107),_=n(331),G=n.n(_),Q=function(){},U=a.a.createContext({onShowNotification:Q,onClearNotifications:Q,success:Q,error:Q}),Y={Containers:{DefaultStyle:{padding:"0 15px 15px 15px",width:"320px"}},NotificationItem:{DefaultStyle:{border:"none",color:"#ffffff",padding:"15px"},success:{backgroundColor:"#4864C9",WebkitBoxShadow:"none",MozBoxShadow:"none",boxShadow:"none"},error:{backgroundColor:"#F86E7F",WebkitBoxShadow:"none",MozBoxShadow:"none",boxShadow:"none"}},Dismiss:{DefaultStyle:{backgroundColor:"none",fontWeight:"lighter",top:"16px",right:"10px"},success:{fontSize:"25px"},error:{fontSize:"0px"}}},Z=function(e){return function(t){Object(g.a)(i,t);var n=Object(m.a)(i);function i(e){var t;return Object(b.a)(this,i),(t=n.call(this,e)).notificationSystem=null,t.addNotification=t.addNotification.bind(Object($.a)(t)),t.clearNotifications=t.clearNotifications.bind(Object($.a)(t)),t.success=t.success.bind(Object($.a)(t)),t.error=t.error.bind(Object($.a)(t)),t}return Object(y.a)(i,[{key:"componentDidMount",value:function(){this.notificationSystem=this.refs.notificationSystem}},{key:"addNotification",value:function(e){var t=e.message,n=e.level,i=e.type,a=e.autoDismiss;"networkStatus"===i?this.notificationSystem.addNotification({message:"Vous \xeates actuellement hors ligne",level:"error",position:this.props.shiftSidebar?"bl":"br",autoDismiss:0}):this.notificationSystem.addNotification(Object(M.a)({message:t,level:n,position:this.props.shiftSidebar?"bl":"br"},"number"===typeof a&&{autoDismiss:a}))}},{key:"success",value:function(e){this.addNotification({message:e,level:"success"})}},{key:"error",value:function(e){this.addNotification({message:e,level:"error"})}},{key:"clearNotifications",value:function(){this.notificationSystem&&this.notificationSystem.clearNotifications()}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(U.Provider,{value:{onClearNotifications:this.clearNotifications,onShowNotification:this.addNotification,success:this.success,error:this.error}},a.a.createElement(e,Object.assign({},this.props,{addNotification:this.addNotification,onShowNotification:this.addNotification,onClearNotifications:this.clearNotifications}))),a.a.createElement(G.a,{ref:"notificationSystem",style:Y}))}}]),i}(a.a.Component)},ee=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Test View 1"))},te=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Test View 2"))},ne=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"getChildContext",value:function(){return{onShowNotification:this.props.onShowNotification,onClearNotifications:this.props.onClearNotifications}}},{key:"render",value:function(){return a.a.createElement(x.BrowserRouter,null,a.a.createElement(v.LastLocationProvider,null,a.a.createElement(p.g,null,a.a.createElement(p.d,{exact:!0,path:"/",component:K}),a.a.createElement(p.d,{exact:!0,path:"/test1",component:ee}),a.a.createElement(p.d,{exact:!0,path:"/test2",component:te}),a.a.createElement(p.d,{exact:!0,path:"/face",component:j}),a.a.createElement(p.d,{exact:!0,path:"/facelm",component:K}),a.a.createElement(p.c,{from:"*",to:"/404"}))))}}]),n}(i.Component);ne.childContextTypes={onShowNotification:k.a.func,onClearNotifications:k.a.func};var ie=Z(ne),ae=function(e){Object(g.a)(n,e);var t=Object(m.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return a.a.createElement(ie,null)}}]),n}(i.Component);r.a.render(a.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[350,1,2]]]);